(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{359:function(s,a,t){s.exports=t.p+"assets/img/caselist.cf9543db.png"},426:function(s,a,t){"use strict";t.r(a);var e=t(44),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"beer接口自动化测试平台-单机版项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#beer接口自动化测试平台-单机版项目"}},[s._v("#")]),s._v(" Beer接口自动化测试平台(单机版项目)")]),s._v(" "),e("h2",{attrs:{id:"预览"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预览"}},[s._v("#")]),s._v(" 预览")]),s._v(" "),e("p",[e("img",{attrs:{src:t(359),alt:"用例列表"}})]),s._v(" "),e("h2",{attrs:{id:"使用到的技术栈"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用到的技术栈"}},[s._v("#")]),s._v(" 使用到的技术栈")]),s._v(" "),e("h3",{attrs:{id:"前端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[s._v("#")]),s._v(" 前端")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue.js"),e("OutboundLink")],1),s._v(" JavaScript框架")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://vuex.vuejs.org/zh/guide/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vuex"),e("OutboundLink")],1),s._v(" 数据集中式存储；跨组件通信")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://router.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue Router"),e("OutboundLink")],1),s._v(" Vue.js 官方的路由管理器。")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://antdv.com/docs/vue/introduce-cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ant Design of Vue"),e("OutboundLink")],1),s._v(" UI组件库")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://g2plot.antv.vision/zh",target:"_blank",rel:"noopener noreferrer"}},[s._v("G2Plot"),e("OutboundLink")],1),s._v(" 开箱即用的图表库")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/axios/axios",target:"_blank",rel:"noopener noreferrer"}},[s._v("axios"),e("OutboundLink")],1),s._v(" 易用、简洁且高效的基于Promise的http库")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://microsoft.github.io/monaco-editor/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Monaco Editor"),e("OutboundLink")],1),s._v(" 实现在线编辑器功能，在线编辑Python代码以及渲染JSON")])]),s._v(" "),e("h3",{attrs:{id:"后端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[s._v("#")]),s._v(" 后端")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.2/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Django"),e("OutboundLink")],1),s._v(" Python Web 框架")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://www.django-rest-framework.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Django REST framework"),e("OutboundLink")],1),s._v(" 基于Django构建restful风格的API")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/jazzband/djangorestframework-simplejwt",target:"_blank",rel:"noopener noreferrer"}},[s._v("djangorestframework-simplejwt"),e("OutboundLink")],1),s._v(" 用于Django REST framework的JSON Web令牌身份验证插件")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/tfranzel/drf-spectacular",target:"_blank",rel:"noopener noreferrer"}},[s._v("drf-spectacular"),e("OutboundLink")],1),s._v(" 生成在线swagger和redoc形式的API文档")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://docs.celeryproject.org/en/stable/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Celery"),e("OutboundLink")],1),s._v(" 实现异步任务队列功能")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://django-celery-results.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("django-celery-results"),e("OutboundLink")],1),s._v(" 使用Django ORM存储Celery任务执行结果")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/adamchainz/django-cors-headers",target:"_blank",rel:"noopener noreferrer"}},[s._v("django-cors-headers"),e("OutboundLink")],1),s._v(" 后端配置CORS解决跨域问题")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://django-grappelli.readthedocs.io/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("django-grappelli"),e("OutboundLink")],1),s._v(" Django自带admin后台的主题美化插件")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://gunicorn.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gunicorn"),e("OutboundLink")],1),s._v(" 用于生产环境部署Django项目的Python WSGI HTTP Server")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/jmespath/jmespath.py",target:"_blank",rel:"noopener noreferrer"}},[s._v("jmespath"),e("OutboundLink")],1),s._v(" 用于JSON查询的语言，实现接口自动化测试中的响应体结果的提取")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://www.mysql.com/cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mysql"),e("OutboundLink")],1),s._v(" 项目数据持久化存储")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://www.rabbitmq.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("RabbitMQ"),e("OutboundLink")],1),s._v(" 用于Celery异步任务队列的消息中间件")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://docs.python-requests.org/en/master/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Requests"),e("OutboundLink")],1),s._v(" 使用Python发起HTTP请求")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://nginx.org/en/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx"),e("OutboundLink")],1),s._v(" Web和反向代理服务器")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://docs.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker"),e("OutboundLink")],1),s._v(" 容器化部署前后端应用")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Compose"),e("OutboundLink")],1),s._v(" 容器编排工具，实现一键部署项目")])]),s._v(" "),e("h4",{attrs:{id:"特别鸣谢以上开源项目-让我得以站在巨人的肩膀上快速构建自己的项目。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特别鸣谢以上开源项目-让我得以站在巨人的肩膀上快速构建自己的项目。"}},[s._v("#")]),s._v(" 特别鸣谢以上开源项目，让我得以站在巨人的肩膀上快速构建自己的项目。")]),s._v(" "),e("h2",{attrs:{id:"部署-生产环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署-生产环境"}},[s._v("#")]),s._v(" 部署(生产环境)")]),s._v(" "),e("ol",[e("li",[s._v("安装docker和docker-compose和git\n"),e("ul",[e("li",[e("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker安装步骤(官方文档)"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker-compose安装步骤(官方文档)"),e("OutboundLink")],1)]),s._v(" "),e("li",[e("a",{attrs:{href:"https://git-scm.com/download/linux",target:"_blank",rel:"noopener noreferrer"}},[s._v("git安装步骤(官方文档)"),e("OutboundLink")],1)])])]),s._v(" "),e("li",[s._v("git拉取本项目代码到服务器"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/passerby223/beer_server.git\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("进入项目"),e("code",[s._v("compose/server")]),s._v("目录\n"),e("ul",[e("li",[s._v("创建部署所需要的配置文件"),e("code",[s._v("config.ini")]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" beer_server/compose\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有vim的话，可以使用vi命令")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" config.ini\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("li",[s._v("添加如下内容到配置文件"),e("code",[s._v("config.ini")]),s._v("，然后"),e("code",[s._v(":wq")]),s._v("保存"),e("div",{staticClass:"language-ini line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[email]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理员邮箱 多个管理员以` # `分隔；每组管理员的信息以`,`分隔, 前边是管理员名称,后边是管理员邮箱地址")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ADMINS")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" anonymous,xxx@189.cn # passerby233,xxx@gmail.com")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理员账户密码")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ADMINS_PASSWORD")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" admin.191215.*")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统邮箱的smtp配置")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMAIL_HOST")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" smtp.163.com")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMAIL_PORT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" 465")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMAIL_HOST_USER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" xxxx@163.com")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IMAP/SMTP服务 或 POP3/SMTP服务 的密码")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EMAIL_HOST_PASSWORD")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" KIBGJJSEXYHPARVE")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 异步测试任务执行完成后，给任务创建者发送邮件时使用")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# development")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";FE_TASK_DETAIL_BASEURL = http://localhost:8080/#/tasks/detail/")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# production")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FE_TASK_DETAIL_BASEURL")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" http://部署nginx所在服务器的域名或IP/#/tasks/detail/")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[secret_key]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" v3fe8wwf94y4mo189syst4#2*ge1*8qx)!@*4%%x1$+ts*d^^cg")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[deploy]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# development")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";DEBUG = True")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# production,生产环境需要把DEBUG设置为False")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DEBUG")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" False")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[s._v("[database]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试环境数据库配置 development")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";ENGINE = django.db.backends.mysql")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";HOST = 127.0.0.1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";PORT = 3306")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";NAME = beer")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";USER = root")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";PASSWORD = 123123")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生产环境数据库配置 production")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果在此处修改了数据库密码，则需要去项目根目录下的docker-compose.yml中同步修改数据库密码(MYSQL_ROOT_PASSWORD字段的值要与此处的密码一致，默认是mysql.196652.*)")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ENGINE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" django.db.backends.mysql")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HOST")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" mysql")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PORT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" 3306")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NAME")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" beer")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" root")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PASSWORD")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" mysql.196652.*")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br")])])])])]),s._v(" "),e("li",[s._v("进入"),e("code",[s._v("compose/frontend")]),s._v("目录\n"),e("ul",[e("li",[s._v("修改"),e("code",[s._v(".env.production")]),s._v("文件中的"),e("code",[s._v("VUE_APP_PRO_API_BASE_URL")]),s._v("为自己的"),e("code",[s._v("服务器域名或IP")]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VUE_APP_PRO_API_BASE_URL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://服务器域名或者IP/api \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])]),s._v(" "),e("li",[s._v("然后回到项目根目录，使用docker-compose命令一键部署项目"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一键部署(docker会自动创建镜像并运行容器, 前端代码也是在镜像构建阶段进行编译的)")]),s._v("\ndocker-compose up -d\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("li",[s._v("等待docker-compose创建镜像完毕后，会自动运行容器。"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器是否均启动完毕")]),s._v("\nw@server:~/beer_server"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose ps")]),s._v("\n  Name                Command               State                                                                   Ports                                                                 \n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nbackend    /bin/sh -c /bin/bash deplo "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   Up      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8000-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("/tcp,:::8000-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("/tcp                                                                                              \nmysql      docker-entrypoint.sh --def "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   Up      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:3306-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp,:::3306-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("33060")]),s._v("/tcp                                                                                   \nnginx      /bin/sh -c /bin/bash deplo "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   Up      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:443-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/tcp,:::443-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp,:::80-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp                                                                \nrabbitmq   docker-entrypoint.sh rabbi "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".   Up      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15671")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:15672-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15672")]),s._v("/tcp,:::15672-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15672")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15691")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15692")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25672")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4369")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5671")]),s._v("/tcp, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5672-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5672")]),s._v("/tcp,:::5672-"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5672")]),s._v("/tcp\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除使用docker-compose构建镜像过程中产生的repository或tag为none的无用镜像文件")]),s._v("\nw@server:~/beer_server"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images | grep none | awk '{print $3}' | xargs docker rmi")]),s._v("\nDeleted: sha256:18e173792b9d00fb0b0fcaffc2bb9040a4125d87925527ba7ce4d3436ee3bb4c\nDeleted: sha256:c4935261a16b1048a747ef2791e072e47f90452aa979feff8d695449f26ff6ab\nDeleted: sha256:5ae67ef04ad1a2ae5b3d866f71fe5a5c6214e8c6f7e728cb12183781d6bf9d68\nDeleted: sha256:9d948dfd0658ba38a80f26833c492552004191cbd7fad4536bdfb033b4ee21c8\nDeleted: sha256:6865f17ee8b6b3008df5d9dfb6f2aeba440b7ade88539ba035f57163890c644f\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])])]),s._v(" "),e("li",[s._v("此时项目已经部署完毕\n"),e("ul",[e("li",[e("code",[s._v("前端页面")]),s._v("和"),e("code",[s._v("admin管理后台页面")]),s._v("登录时默认的"),e("code",[s._v("账户名")]),s._v("是"),e("code",[s._v("config.ini")]),s._v("配置文件中的"),e("code",[s._v("ADMINS")]),s._v("配置的"),e("code",[s._v("管理员账户")]),s._v("。"),e("code",[s._v("账户名")]),s._v("使用"),e("code",[s._v("邮箱地址")]),s._v("或"),e("code",[s._v("用户名")]),s._v("均可以。"),e("code",[s._v("密码")]),s._v("默认"),e("code",[s._v("admin.191215.*")])]),s._v(" "),e("li",[s._v("浏览器访问"),e("code",[s._v("http://服务器域名或IP/")]),s._v("(默认80端口)即可查看项目前端页面")]),s._v(" "),e("li",[s._v("浏览器访问"),e("code",[s._v("http://服务器域名或IP/admin/")]),s._v("(默认80端口)即可查看项目admin管理后台页面")]),s._v(" "),e("li",[s._v("浏览器访问"),e("code",[s._v("http://服务器域名或IP/api/schema/redoc/")]),s._v("(默认80端口)即可查看项目redoc形式的接口文档")]),s._v(" "),e("li",[s._v("浏览器访问"),e("code",[s._v("http://服务器域名或IP/api/schema/swagger-ui/")]),s._v("(默认80端口)即可查看项目swagger形式的接口文档")])])])]),s._v(" "),e("h2",{attrs:{id:"开发-测试环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发-测试环境"}},[s._v("#")]),s._v(" 开发(测试环境)")]),s._v(" "),e("h3",{attrs:{id:"前端开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端开发"}},[s._v("#")]),s._v(" 前端开发")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("compose/frontend")]),s._v("目录下的代码就是前端本地开发所需要的代码"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Project setup")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Compiles and hot-reloads for development")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" serve\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Compiles and minifies for production")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" build\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Lints and fixes files")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" lint\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"后端开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端开发"}},[s._v("#")]),s._v(" 后端开发")]),s._v(" "),e("ol",[e("li",[s._v("在"),e("code",[s._v("compose/server")]),s._v("目录下的"),e("code",[s._v("config.ini")]),s._v("配置文件中修改测试环境所需要的环境配置("),e("code",[s._v("数据库")]),s._v("需要自己手动创建)")]),s._v(" "),e("li",[s._v("返回到项目"),e("code",[s._v("根目录")]),s._v("安装"),e("code",[s._v("项目依赖库")]),s._v("，然后进行"),e("code",[s._v("数据迁移")]),s._v("(会自动在上一步中创建的数据库中创建开发所需要的数据表)"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回项目根目录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("./"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装项目依赖库")]),s._v("\npip3 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -i https://pypi.doubanio.com/simple -U pip "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" pip3 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -i https://pypi.doubanio.com/simple -r requirements.txt\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建迁移记录")]),s._v("\npython3 manage.py makemigrations\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据迁移(创建数据库表)")]),s._v("\npython3 manage.py migrate\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])]),s._v(" "),e("li",[s._v("初始化项目管理员账户"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用`init_admin`命令初始化`config.ini`配置文件中的`ADMINS`配置的`管理员账户`")]),s._v("\npython3 manage.py init_admin\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者使用Django自带的``命令")]),s._v("\npython3 manage.py createsuperuser\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])]),s._v(" "),e("li",[s._v("更新全局函数文件内容(可选操作，用于"),e("code",[s._v("接口入参")]),s._v("中使用"),e("code",[s._v("函数运算功能")]),s._v(")"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("python3 manage.py update_global_function_content\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("启动开发服务器进行测试"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("python3 manage.py runserver\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[s._v("测试环境使用Celery异步任务队列功能(用于"),e("code",[s._v("异步")]),s._v("运行"),e("code",[s._v("测试项目")]),s._v("&"),e("code",[s._v("测试套件")]),s._v("，本项目中的"),e("code",[s._v("单个测试用例")]),s._v("不是异步运行的)"),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建rabbitmq容器")]),s._v("\ndocker run -d --name ramq -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5672")]),s._v(":5672 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15672")]),s._v(":15672 rabbitmq "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动容器(容器关闭状态可用)")]),s._v("\ndocker start ramq\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动Celery服务(在项目manage.py文件同级目录下用该命令启动)")]),s._v("\ncelery -A beer_server worker -l INFO\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])])]),s._v(" "),e("li",[s._v("跨域问题\n"),e("ul",[e("li",[e("code",[s._v("后端测试环境")]),s._v("默认配置了"),e("code",[s._v("CORS")]),s._v("来避免"),e("code",[s._v("跨域")]),s._v("，"),e("code",[s._v("前端测试环境")]),s._v("不需要在"),e("code",[s._v("单独配置代理")]),s._v("来解决"),e("code",[s._v("跨域")]),s._v("问题了。")]),s._v(" "),e("li",[e("code",[s._v("生产环境")]),s._v("默认使用了"),e("code",[s._v("nginx")]),s._v("的"),e("code",[s._v("反向代理")]),s._v("来解决"),e("code",[s._v("跨域")]),s._v("问题")])])]),s._v(" "),e("li",[s._v("后端在线接口文档(启动开发服务器后)\n"),e("ul",[e("li",[s._v("浏览器访问 "),e("a",{attrs:{href:"http://127.0.0.1:8000/api/schema/redoc/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://127.0.0.1:8000/api/schema/redoc/"),e("OutboundLink")],1),s._v(" 查看"),e("code",[s._v("redoc")]),s._v("格式的接口文档")]),s._v(" "),e("li",[s._v("浏览器访问 "),e("a",{attrs:{href:"http://127.0.0.1:8000/api/schema/swagger-ui/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://127.0.0.1:8000/api/schema/swagger-ui/"),e("OutboundLink")],1),s._v(" 查看"),e("code",[s._v("swagger")]),s._v("格式的接口文档")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);